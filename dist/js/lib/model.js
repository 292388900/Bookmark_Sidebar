/*! (c) Philipp KÃ¶nig under GPL-3.0 */
"use strict";!function(o){window.ModelHelper=function(o){var e=this,t={u:{openStates:{},hiddenEntries:{},scrollPos:{},entriesLocked:!1,sort:{name:"custom",dir:"ASC"},mostViewedPerMonth:!1,viewAsTree:!0},b:{pxTolerance:{windowed:20,maximized:1},openAction:"mousedown",newTab:"foreground",linkAction:"current",preventPageScroll:!1,dirAccordion:!1,rememberState:"all",rememberSearch:!0,dirOpenDuration:.5,openDelay:0,closeTimeout:1,initialOpenOnNewTab:!0},a:{sidebarPosition:"left",language:"default",showIndicator:!0,showIndicatorIcon:!0,showBookmarkIcons:!0,styles:{colorScheme:"rgb(27,130,241)",textColor:"rgb(102,102,102)",indicatorWidth:"40px",indicatorIconSize:"32px",indicatorIconColor:"rgb(255,255,255)",indicatorColor:"rgba(0,0,0,0.5)",sidebarWidth:"350px",sidebarMaskColor:"rgba(255,255,255,0.8)",bookmarksFontSize:"14px",bookmarksIconSize:"16px",bookmarksLineHeight:"40px",bookmarksDirIcon:"dir-1",bookmarksDirColor:"rgb(102,102,102)",bookmarksDirIndentation:"25px",bookmarksHorizontalPadding:"16px",overlayMaskColor:"rgba(0,0,0,0.5)",fontFamily:"default"}}},i={};this.init=function(o){var e=["utility","behaviour","appearance"];chrome.storage.sync.get(e,function(t){i=t,e.forEach(function(o){void 0===i[o]&&(i[o]={})}),"function"==typeof o&&o()})},this.getData=function(e){var n=e;"string"==typeof n&&(n=[n]);var r={};if(n.forEach(function(e){var n=e.split("/")[0],a=e.split("/")[1],s=null,c=null;switch(n){case"u":c=i.utility;break;case"b":c=i.behaviour;break;case"a":c=i.appearance}if(null!==c&&(void 0===c[a]?"rememberState"===a&&void 0!==c.rememberScroll?s=!1===c.rememberScroll?"openStates":"all":void 0!==t[n]&&void 0!==t[n][a]&&(s=t[n][a]):s=c[a]),"a/styles"===e&&(s=Object.assign({},t.a.styles,s),o.helper.font&&o.helper.font.isLoaded())){var l=o.helper.font.getFontInfo();s.fontFamily=l.name,Object.assign(s,l.fontWeights)}"a/showIndicator"===e&&!0===s&&void 0!==i.behaviour.openAction&&"mousemove"===i.behaviour.openAction&&(s=!1),r[a]=s}),"string"==typeof e){var a=e.split("/")[1];r=r[a]}return r},this.setData=function(o,t){e.init(function(){Object.keys(o).forEach(function(e){var t=e.split("/")[0],n=e.split("/")[1],r=o[e];switch(t){case"u":i.utility[n]=r,i.utility;break;case"b":i.behaviour[n]=r;break;case"a":i.appearance[n]=r}});try{chrome.storage.sync.set(i,function(){"function"==typeof t&&t()})}catch(o){"function"==typeof t&&t()}})},this.call=function(o,e,t){"function"==typeof e&&(t=e,e={}),e.type=o,chrome.extension.sendMessage(e,function(o){"function"==typeof t&&t(o)})}}}(jsu);