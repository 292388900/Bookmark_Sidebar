/*! (c) Philipp KÃ¶nig under GPL-3.0 */
"use strict";!function(a){window.I18nHelper=function(b){var c=this,d={},e={i18n:"data-i18n",i18nReplaces:"data-i18nReplaces"};this.init=function(a){b.helper.model.call("languageInfos",function(e){[c.getLanguage(),b.opts.manifest.default_locale].some(function(c){if(e.infos&&e.infos[c]&&e.infos[c].available)return b.helper.model.call("langvars",{lang:c},function(b){b&&b.langVars&&(d=b.langVars,"function"==typeof a&&a())}),!0})})},this.getLanguage=function(){var a=b.helper.model.getData("a/language");return"default"===a&&(a=chrome.i18n.getUILanguage()),a},this.getLocaleDate=function(a){return a.toLocaleDateString([c.getLanguage(),b.opts.manifest.default_locale],{year:"numeric",month:"2-digit",day:"2-digit"})},this.parseHtml=function(b){a(b).find("["+e.i18n+"]").forEach(function(b){var d=null,f=a(b).attr(e.i18n);if(f){var g=[],h=a(b).attr(e.i18nReplaces);h&&(g=h.split(",")),d=c.get(f,g)}d?(a(b).removeAttr(e.i18n),a(b).html(d)):a(b).remove()})},this.get=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c="",e=d[a];return e&&e.message&&(c=e.message,b.forEach(function(a,b){c=c.replace(new RegExp("\\{"+(b+1)+"\\}"),a)}),c=c.replace(/\[b\](.*)\[\/b\]/,"<strong>$1</strong>"),c=c.replace(/\[a\](.*)\[\/a\]/,"<a href='#'>$1</a>"),c=c.replace(/\[em\](.*)\[\/em\]/,"<em>$1</em>")),c}}}(jsu);