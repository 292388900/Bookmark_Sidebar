/*! (c) Philipp KÃ¶nig under GPL-3.0 */
"use strict";!function(a){var b="mousedown",c={visible:"visible",reversed:"reversed"},d={body:a("body"),title:a("head > title"),thanks:a("section#thanks"),tutorial:a("section#tutorial"),copyright:a("a#copyright"),close:a("a.close"),startTutorial:a("a.startTutorial")},e=function(){var c="howto_";a("[data-i18n]").forEach(function(b){var d=a(b).attr("data-i18n"),e=0===d.search(/^share_userdata/)?d:c+d;a(b).html(chrome.i18n.getMessage(e).replace(/\[u\](.*)\[\/u\]/,"<span>$1</span>"))});var e=d.tutorial.children("p.text[data-index='2']").text();e=e.replace(/\{1\}/,chrome.i18n.getMessage(c+"tutorial_"+("contextmenu"===b?"right":"left")+"_click")),d.tutorial.children("p.text[data-index='2']").text(e);var f=chrome.runtime.getManifest();d.title.text(d.title.text()+" - "+f.short_name)},f=function(){location.href.search(/(\?|\&)tutorial\=1/)===-1?d.thanks.addClass(c.visible):h()},g=function(){d.close.on("click",function(a){a.preventDefault(),window.close()}),d.startTutorial.on("click",function(a){if(a.preventDefault(),d.tutorial.hasClass(c.visible)){var b=location.href.replace(/(\?|\&)tutorial\=1/,"");location.href=b+(b.search(/\?/)===-1?"?":"&")+"tutorial=1"}else d.thanks.removeClass(c.visible),h()})},h=function(){d.tutorial.addClass(c.visible);var a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;setTimeout(function(){d.tutorial.children("p.text[data-index='2']").removeClass(c.visible),d.tutorial.children("div#sidebar").addClass(c.visible),d.tutorial.children("div#cursor").attr("data-step",3),setTimeout(function(){d.tutorial.children("p.text[data-index='3']").addClass(c.visible),setTimeout(function(){d.tutorial.children("div#cursor, p.text").removeClass(c.visible),d.tutorial.children("div#mask").addClass(c.visible)},3e3)},1e3)},a)},e=function(){"contextmenu"===b&&d.tutorial.children("div#cursor").addClass(c.reversed),setTimeout(function(){d.tutorial.children("p.text[data-index='2']").addClass(c.visible),d.tutorial.children("div#cursor").attr("data-step",2),a()},500)};setTimeout(function(){d.tutorial.children("p.text[data-index='1']").addClass(c.visible),setTimeout(function(){d.tutorial.children("div#cursor").addClass(c.visible),setTimeout(function(){d.tutorial.children("div#cursor").attr("data-step",1),setTimeout(function(){d.tutorial.children("p.text[data-index='1']").removeClass(c.visible),"mousemove"===b?a(700):e()},1500)},500)},1e3)},500)};!function(){chrome.storage.sync.get(["behaviour"],function(a){a.behaviour&&a.behaviour.openAction&&(b=a.behaviour.openAction),e(),g(),f()})}()}(jsu);