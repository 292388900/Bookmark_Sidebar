/*! (c) Philipp KÃ¶nig under GPL-3.0 */
"use strict";!function(a){window.howto=function(){var b=this;this.opts={elm:{body:a("body"),title:a("head > title"),thanks:a("section#thanks"),tutorial:a("section#tutorial"),copyright:a("a#copyright"),close:a("a.close"),startTutorial:a("a.startTutorial")},classes:{visible:"visible",reversed:"reversed",loading:"loading"},attr:{i18nReplaces:"data-i18nReplaces"},manifest:chrome.runtime.getManifest()},this.run=function(){c(),b.helper.model.init(function(){b.helper.i18n.init(function(){b.helper.font.init(),b.helper.stylesheet.init(),b.helper.stylesheet.addStylesheets(["howto"],a(document));var c=b.helper.model.getData(["b/openAction","a/sidebarPosition"]);b.opts.elm.tutorial.children("p.text[data-index='1']").attr(b.opts.attr.i18nReplaces,b.helper.i18n.get("howto_tutorial_"+c.sidebarPosition)),b.opts.elm.tutorial.children("p.text[data-index='2']").attr(b.opts.attr.i18nReplaces,b.helper.i18n.get("howto_tutorial_"+("contextmenu"===c.openAction?"right":"left"))),b.helper.i18n.parseHtml(document),b.opts.elm.title.text(b.opts.elm.title.text()+" - "+b.helper.i18n.get("extension_name")),e(),d(),setTimeout(function(){b.opts.elm.body.removeClass(b.opts.classes.loading)},100)})})};var c=function(){b.helper={i18n:new window.I18nHelper(b),font:new window.FontHelper(b),stylesheet:new window.StylesheetHelper(b),model:new window.ModelHelper(b)}},d=function(){-1===location.href.search(/(\?|\&)tutorial\=1/)?b.opts.elm.thanks.addClass(b.opts.classes.visible):f()},e=function(){b.opts.elm.close.on("click",function(a){a.preventDefault(),window.close()}),b.opts.elm.startTutorial.on("click",function(a){if(a.preventDefault(),b.opts.elm.tutorial.hasClass(b.opts.classes.visible)){var c=location.href.replace(/(\?|\&)tutorial\=1/,"");location.href=c+(-1===c.search(/\?/)?"?":"&")+"tutorial=1"}else b.opts.elm.thanks.removeClass(b.opts.classes.visible),f()})},f=function(){var a=b.helper.model.getData(["b/openAction","a/sidebarPosition"]);b.opts.elm.tutorial.addClass(b.opts.classes.visible),b.opts.elm.tutorial.attr("data-pos",a.sidebarPosition);var c=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;setTimeout(function(){b.opts.elm.tutorial.children("p.text[data-index='2']").removeClass(b.opts.classes.visible),b.opts.elm.tutorial.children("div#sidebar").addClass(b.opts.classes.visible),b.opts.elm.tutorial.children("div#cursor").attr("data-step",3),setTimeout(function(){b.opts.elm.tutorial.children("p.text[data-index='3']").addClass(b.opts.classes.visible),setTimeout(function(){b.opts.elm.tutorial.children("div#cursor, p.text").removeClass(b.opts.classes.visible),b.opts.elm.tutorial.children("div#mask").addClass(b.opts.classes.visible)},3e3)},1e3)},a)},d=function(){"contextmenu"===a.openAction&&b.opts.elm.tutorial.children("div#cursor").addClass(b.opts.classes.reversed),setTimeout(function(){b.opts.elm.tutorial.children("p.text[data-index='2']").addClass(b.opts.classes.visible),b.opts.elm.tutorial.children("div#cursor").attr("data-step",2),c()},500)};setTimeout(function(){b.opts.elm.tutorial.children("p.text[data-index='1']").addClass(b.opts.classes.visible),setTimeout(function(){b.opts.elm.tutorial.children("div#cursor").addClass(b.opts.classes.visible),setTimeout(function(){b.opts.elm.tutorial.children("div#cursor").attr("data-step",1),setTimeout(function(){b.opts.elm.tutorial.children("p.text[data-index='1']").removeClass(b.opts.classes.visible),"mousemove"===a.openAction?c(700):d()},1500)},500)},1e3)},500)}},(new window.howto).run()}(jsu);