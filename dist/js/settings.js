/*! Bookmark Sidebar v1.3.3 | (c) Philipp KÃ¶nig under GPL-3.0 */
"use strict";!function(a){var b={submitSuccess:"submitSuccess",tabBar:"tabBar",tabActive:"active",tabHidden:"hidden",feedbackError:"error",loading:"loading"},c={body:a("body"),title:a("head > title"),copyright:a("a#copyright"),tab:a("section#content > div.tab"),headerContent:a("header > div"),config:{rangeInputs:a("input[type='range']"),pxToleranceMaximized:a("input#pxToleranceMaximized"),pxToleranceWindowed:a("input#pxToleranceWindowed"),mouseScrollSensitivity:a("input#mouseScrollSensitivity"),trackpadScrollSensitivity:a("input#trackpadScrollSensitivity"),closeTimeout:a("input#closeTimeout"),addVisual:a("input#addVisual"),newTab:a("select#newTab"),rememberScroll:a("input#rememberScroll"),hideEmptyDirs:a("input#hideEmptyDirs"),openAction:a("select#openAction"),save:a("button#save"),restoreDefaults:a("button#restore")},feedback:{save:a("button#sendFeedback"),textarea:a("textarea#feedback"),email:a("input#feedbackEmail"),rate:a("a#rate")},shareUserdata:{share:a("input#shareUserdata")}},d=function(){a("[data-i18n]").forEach(function(b){var c=a(b).attr("data-i18n"),d=0===c.search(/^share_userdata/)?c:"settings_"+c;a(b).html(chrome.i18n.getMessage(d).replace(/\[u\](.*)\[\/u\]/,"<span>$1</span>"))})},e=function(){var d=a("<ul />").addClass(b.tabBar).prependTo(a(c.headerContent));c.tab.forEach(function(b){var c=a(b).attr("data-name");a("<li />").attr("data-name",c).html("<a href='#'>"+chrome.i18n.getMessage("settings_tab_"+c)+"</a>").appendTo(d)}),d.find("> li > a").on("click",function(e){e.preventDefault(),d.children("li").removeClass(b.tabActive);var f=a(e.currentTarget).parent("li");f.addClass(b.tabActive),c.tab.addClass(b.tabHidden),a("section#content > div.tab[data-name='"+f.attr("data-name")+"']").removeClass(b.tabHidden)}),d.find("> li > a").eq(0).trigger("click")},f=function(){chrome.storage.sync.get("shareUserdata",function(a){c.shareUserdata.share[0].checked="y"===a.shareUserdata}),c.shareUserdata.share.on("change",function(){chrome.storage.sync.remove(["lastShareDate"]),chrome.storage.sync.set({shareUserdata:c.shareUserdata.share[0].checked?"y":"n"},function(){c.body.attr("data-successtext",chrome.i18n.getMessage("settings_saved_share_userdata")),c.body.addClass(b.submitSuccess),setTimeout(function(){c.body.removeClass(b.submitSuccess)},1500)})})},g=function(){c.feedback.rate.attr({href:"https://chrome.google.com/webstore/detail/"+chrome.i18n.getMessage("@@extension_id")+"/reviews",target:"_blank"}),c.feedback.save.on("click",function(){var d=c.feedback.textarea[0].value,e=c.feedback.email[0].value,f=e.length>0&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),g=d.length>0;if(f&&g){c.feedback.save.addClass(b.loading);var h=chrome.runtime.getManifest(),i=new XMLHttpRequest;i.open("POST","https://moonware.de/ajax/extensions/feedback",!0),i.onload=function(){c.feedback.save.removeClass(b.loading),c.feedback.textarea[0].value="",c.feedback.email[0].value="",c.body.attr("data-successtext",chrome.i18n.getMessage("settings_saved_feedback")),c.body.addClass(b.submitSuccess),setTimeout(function(){c.body.removeClass(b.submitSuccess)},1500)};var j=new FormData;j.append("email",e),j.append("msg",d),j.append("extension",JSON.stringify({name:h.name,version:h.version})),i.send(j)}else f?g||c.feedback.textarea.addClass(b.feedbackError):c.feedback.email.addClass(b.feedbackError);setTimeout(function(){a("."+b.feedbackError).removeClass(b.feedbackError)},1500)})},h=function(){chrome.storage.sync.get("addVisual",function(a){c.config.addVisual[0].checked="undefined"==typeof a.addVisual||"y"===a.addVisual}),chrome.storage.sync.get("rememberScroll",function(a){c.config.rememberScroll[0].checked="undefined"==typeof a.rememberScroll||"y"===a.rememberScroll}),chrome.storage.sync.get("hideEmptyDirs",function(a){c.config.hideEmptyDirs[0].checked="undefined"==typeof a.hideEmptyDirs||"y"===a.hideEmptyDirs}),chrome.storage.sync.get("openAction",function(a){c.config.openAction[0].value="undefined"==typeof a.openAction?"contextmenu":a.openAction}),chrome.storage.sync.get(["newTab","middleClickActive"],function(a){"undefined"==typeof a.newTab&&"undefined"!=typeof a.middleClickActive&&(a.newTab="y"===a.middleClickActive?"foreground":"background"),c.config.newTab[0].value="undefined"==typeof a.newTab?"foreground":a.newTab}),chrome.storage.sync.get("closeTimeout",function(a){c.config.closeTimeout[0].value="undefined"==typeof a.closeTimeout?1:a.closeTimeout,c.config.closeTimeout.trigger("change")}),chrome.storage.sync.get("pxTolerance",function(a){var b={windowed:10,maximized:1};"undefined"!=typeof a.pxTolerance&&(b=JSON.parse(a.pxTolerance)),c.config.pxToleranceMaximized[0].value=b.maximized,c.config.pxToleranceWindowed[0].value=b.windowed,c.config.pxToleranceMaximized.trigger("change"),c.config.pxToleranceWindowed.trigger("change")}),chrome.storage.sync.get("scrollSensitivity",function(a){var b={mouse:1,trackpad:1};"undefined"!=typeof a.scrollSensitivity&&(b=JSON.parse(a.scrollSensitivity)),c.config.mouseScrollSensitivity[0].value=b.mouse,c.config.trackpadScrollSensitivity[0].value=b.trackpad,c.config.mouseScrollSensitivity.trigger("change"),c.config.trackpadScrollSensitivity.trigger("change")}),c.config.rangeInputs.on("input change",function(b){a(b.currentTarget).next("span").text(b.currentTarget.value)}),c.config.save.on("click",function(){chrome.storage.sync.set({addVisual:c.config.addVisual[0].checked?"y":"n",rememberScroll:c.config.rememberScroll[0].checked?"y":"n",hideEmptyDirs:c.config.hideEmptyDirs[0].checked?"y":"n",closeTimeout:c.config.closeTimeout[0].value,openAction:c.config.openAction[0].value,newTab:c.config.newTab[0].value,pxTolerance:JSON.stringify({windowed:c.config.pxToleranceWindowed[0].value,maximized:c.config.pxToleranceMaximized[0].value}),scrollSensitivity:JSON.stringify({mouse:c.config.mouseScrollSensitivity[0].value,trackpad:c.config.trackpadScrollSensitivity[0].value})},function(){c.body.attr("data-successtext",chrome.i18n.getMessage("settings_saved_config")),c.body.addClass(b.submitSuccess),setTimeout(function(){c.body.removeClass(b.submitSuccess)},1500)}),chrome.storage.sync.remove(["middleClickActive"])}),c.config.restoreDefaults.on("click",function(){chrome.storage.sync.remove(["addVisual","rememberScroll","hideEmptyDirs","closeTimeout","openAction","newTab","pxTolerance","scrollSensitivity"],function(){c.body.attr("data-successtext",chrome.i18n.getMessage("settings_saved_restore")),c.body.addClass(b.submitSuccess),setTimeout(function(){c.body.removeClass(b.submitSuccess),setTimeout(function(){window.close()},100)},1500)})})};!function(){var b=chrome.runtime.getManifest();c.title.text(b.short_name+" - "+a("head > title").text());var i=+c.copyright.children("span.created").text(),j=(new Date).getFullYear();j>i&&c.copyright.children("span.created").text(i+" - "+j),d(),e(),h(),g(),f()}()}(jsu);